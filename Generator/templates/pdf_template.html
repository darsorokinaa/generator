<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Вариант {{ variant.id }}</title>
    {{ math_styles|safe }}
    <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    @page {
        size: A4;
        margin: 2cm 2cm 2cm 2cm;
    }

    body {
        font-family: "Times New Roman", Times, serif;
        font-size: 12pt;
        line-height: 1.3;
        color: #000;
    }

    /* Заголовок */
    .doc-header {
        text-align: center;
        margin-bottom: 20pt;
    }

    .doc-header-title {
        font-size: 14pt;
        font-weight: bold;
        text-transform: uppercase;
        margin-bottom: 6pt;
    }

    .doc-header-subtitle {
        font-size: 12pt;
    }

    /* Задание */
    .task {
        page-break-inside: avoid;
        margin-bottom: 20pt;
        clear: both;
    }

    .task-number {
        float: left;
        width: 26pt;
        height: 18pt;
        border: 1px solid #000;
        text-align: center;
        font-weight: bold;
        margin-right: 6pt;
        font-size: 12pt;
        line-height: 18pt;
    }

    .task-body {
        margin-left: 36pt;
    }

    .task-body p {
        margin-bottom: 6pt;
        text-align: justify;
    }

    .task-body img {
        max-width: 80%;
        display: block;
        margin: 10pt auto;
    }

    .answer-line {
        margin-top: 8pt;
        font-weight: normal;
    }

    .answer-field {
        border-bottom: 1px solid #000;
        display: inline-block;
        width: 200pt;
        height: 14pt;
        vertical-align: bottom;
    }

    /* Страница ответов */
    .answers-page {
        page-break-before: always;
    }

    .answers-title {
        text-align: center;
        font-size: 14pt;
        font-weight: bold;
        margin-bottom: 20pt;
        text-transform: uppercase;
    }

    .answers-table {
        width: 100%;
        border-collapse: collapse;
        border: 1px solid #000;
        margin-bottom: 20pt;
    }

    .answers-table th,
    .answers-table td {
        border: 1px solid #000;
        padding: 6pt 4pt;
        text-align: center;
        font-size: 12pt;
    }
</style>

   
</head>
<body>

<!-- Задания -->
{% for item in contents %}

    {% if forloop.first %}
        {% if item.part %}<div class="part-heading">{{ item.part }}</div>{% endif %}
    {% else %}
        {% with prev=contents|slice:forloop.counter0 %}
            {% for p in prev reversed %}
                {% if forloop.first %}
                    {% if p.part != item.part %}
                        {% if item.part %}<div class="part-heading">{{ item.part }}</div>{% endif %}
                    {% endif %}
                {% endif %}
            {% endfor %}
        {% endwith %}
    {% endif %}

    <div class="task">
    <div class="task-number">{{ item.order }}</div>
    <div class="task-body">
        {{ item.text|safe }}

        {% if item.file_url %}
            <img src="{{ item.file_url }}">
        {% endif %}

        <div class="answer-line">
            Ответ: <span class="answer-field"></span>
        </div>
    </div>
</div>


{% endfor %}

<!-- Страница ответов КАК В ДЕМО -->
<div class="answers-page">
    <div class="answers-title">Ответы</div>

    <table class="answers-table">
        <tr>
            <th>Номер задания</th>
            {% for part in answers_parts %}
                {% for item in part.items %}
                    <th>{{ item.order }}</th>
                {% endfor %}
            {% endfor %}
        </tr>
        <tr>
            <td><strong>Ответ</strong></td>
            {% for part in answers_parts %}
                {% for item in part.items %}
                    <td>{{ item.answer }}</td>
                {% endfor %}
            {% endfor %}
        </tr>
    </table>
</div>


<!-- Футер с информацией о проверке (как в конце документа) -->
<div style="margin-top: 30pt; font-size: 10pt; border-top: 1px solid #000; padding-top: 8pt;">
    <p>В соответствии с Порядком проведения государственной итоговой аттестации по образовательным программам основного общего образования...</p>
    <p style="margin-top: 5pt;">© 2026 Федеральная служба по надзору в сфере образования и науки</p>
</div>

</body>
</html>